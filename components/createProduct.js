const productJSON = [
  {
    title: "APPLE iPhone 11 (White, 64 GB)",
    image: {
      url: "https://assets.nextleap.app/images/iphone-image.webp",
      width: 146.42,
      height: 200,
      alt: "iphone",
    },
    ratings: {
      overallRating: 4.7,
      totalRatingsNum: 181870,
      totalReviewsNum: 10713,
    },
    featuresList: [
      "128 GB ROM",
      "15.49 cm (6.1 inch) Super Retina XDR Display",
      "12MP + 12MP | 12MP Front Camera",
      "A15 Bionic Chip Processor",
      "Warranty for 1 Year",
    ],
    freeDelivery: true,
    price: {
      mrp: 48999,
      finalPrice: 44999,
      discount: {
        type: "PERCENT",
        data: 7,
      },
    },
    exchangeOfferDiscount: {
      type: "ABSOLUTE",
      data: 20000,
    },
    bankOffersLink: {
      buttonText: "Bank Offers",
      action: {
        type: "NAVIGATION",
        url: "",
      },
      textColor: "#388e3c",
    },
    productPageLink: {
      type: "NAVIGATION",
      url: "https://www.flipkart.com/apple-iphone-11-white-128-gb/p/itme32df47ea6742?pid=MOBFWQ6B7KKRXDDS&lid=LSTMOBFWQ6B7KKRXDDSULUZ0N&marketplace=FLIPKART&q=iphone&store=tyy%2F4io&srno=s_1_1&otracker=AS_Query_OrganicAutoSuggest_1_1_na_na_na&otracker1=AS_Query_OrganicAutoSuggest_1_1_na_na_na&fm=organic&iid=5d05607a-6345-4d19-b8c6-c8c4c21c050a.MOBFWQ6B7KKRXDDS.SEARCH&ppt=hp&ppn=homepage&ssid=0sc0d1awkg0000001675935199363&qH=0b3f45b266a97d70",
    },
  },
  {
    title: "APPLE iPhone 11 (Black, 64 GB)",
    image: {
      url: "https://assets.nextleap.app/images/iphone-image.webp",
      width: 146.42,
      height: 200,
      alt: "iphone",
    },
    ratings: {
      overallRating: 4.7,
      totalRatingsNum: 181870,
      totalReviewsNum: 10713,
    },
    featuresList: [
      "128 GB ROM",
      "15.49 cm (6.1 inch) Super Retina XDR Display",
      "12MP + 12MP | 12MP Front Camera",
      "A15 Bionic Chip Processor",
      "Warranty for 1 Year",
    ],
    freeDelivery: true,
    price: {
      mrp: 48999,
      finalPrice: 44999,
      discount: {
        type: "PERCENT",
        data: 7,
      },
    },
    exchangeOfferDiscount: {
      type: "ABSOLUTE",
      data: 20000,
    },
    bankOffersLink: {
      buttonText: "Bank Offers",
      action: {
        type: "NAVIGATION",
        url: "",
      },
      textColor: "#388e3c",
    },
    productPageLink: {
      type: "NAVIGATION",
      url: "https://www.flipkart.com/apple-iphone-11-white-128-gb/p/itme32df47ea6742?pid=MOBFWQ6B7KKRXDDS&lid=LSTMOBFWQ6B7KKRXDDSULUZ0N&marketplace=FLIPKART&q=iphone&store=tyy%2F4io&srno=s_1_1&otracker=AS_Query_OrganicAutoSuggest_1_1_na_na_na&otracker1=AS_Query_OrganicAutoSuggest_1_1_na_na_na&fm=organic&iid=5d05607a-6345-4d19-b8c6-c8c4c21c050a.MOBFWQ6B7KKRXDDS.SEARCH&ppt=hp&ppn=homepage&ssid=0sc0d1awkg0000001675935199363&qH=0b3f45b266a97d70",
    },
  },
  {
    title: "APPLE iPhone 11 (White, 128 GB)",
    image: {
      url: "https://assets.nextleap.app/images/iphone-image.webp",
      width: 146.42,
      height: 200,
      alt: "iphone",
    },
    ratings: {
      overallRating: 4.7,
      totalRatingsNum: 181870,
      totalReviewsNum: 10713,
    },
    featuresList: [
      "128 GB ROM",
      "15.49 cm (6.1 inch) Super Retina XDR Display",
      "12MP + 12MP | 12MP Front Camera",
      "A15 Bionic Chip Processor",
      "Warranty for 1 Year",
    ],
    freeDelivery: true,
    price: {
      mrp: 48999,
      finalPrice: 44999,
      discount: {
        type: "PERCENT",
        data: 7,
      },
    },
    exchangeOfferDiscount: {
      type: "ABSOLUTE",
      data: 20000,
    },
    bankOffersLink: {
      buttonText: "Bank Offers",
      action: {
        type: "NAVIGATION",
        url: "",
      },
      textColor: "#388e3c",
    },
    productPageLink: {
      type: "NAVIGATION",
      url: "https://www.flipkart.com/apple-iphone-11-white-128-gb/p/itme32df47ea6742?pid=MOBFWQ6B7KKRXDDS&lid=LSTMOBFWQ6B7KKRXDDSULUZ0N&marketplace=FLIPKART&q=iphone&store=tyy%2F4io&srno=s_1_1&otracker=AS_Query_OrganicAutoSuggest_1_1_na_na_na&otracker1=AS_Query_OrganicAutoSuggest_1_1_na_na_na&fm=organic&iid=5d05607a-6345-4d19-b8c6-c8c4c21c050a.MOBFWQ6B7KKRXDDS.SEARCH&ppt=hp&ppn=homepage&ssid=0sc0d1awkg0000001675935199363&qH=0b3f45b266a97d70",
    },
  },
  {
    title: "APPLE iPhone 11 (Black, 128 GB)",
    image: {
      url: "https://assets.nextleap.app/images/iphone-image.webp",
      width: 146.42,
      height: 200,
      alt: "iphone",
    },
    ratings: {
      overallRating: 4.7,
      totalRatingsNum: 181870,
      totalReviewsNum: 10713,
    },
    featuresList: [
      "128 GB ROM",
      "15.49 cm (6.1 inch) Super Retina XDR Display",
      "12MP + 12MP | 12MP Front Camera",
      "A15 Bionic Chip Processor",
      "Warranty for 1 Year",
    ],
    freeDelivery: true,
    price: {
      mrp: 48999,
      finalPrice: 44999,
      discount: {
        type: "PERCENT",
        data: 7,
      },
    },
    exchangeOfferDiscount: {
      type: "ABSOLUTE",
      data: 20000,
    },
    bankOffersLink: {
      buttonText: "Bank Offers",
      action: {
        type: "NAVIGATION",
        url: "",
      },
      textColor: "#388e3c",
    },
    productPageLink: {
      type: "NAVIGATION",
      url: "https://www.flipkart.com/apple-iphone-11-white-128-gb/p/itme32df47ea6742?pid=MOBFWQ6B7KKRXDDS&lid=LSTMOBFWQ6B7KKRXDDSULUZ0N&marketplace=FLIPKART&q=iphone&store=tyy%2F4io&srno=s_1_1&otracker=AS_Query_OrganicAutoSuggest_1_1_na_na_na&otracker1=AS_Query_OrganicAutoSuggest_1_1_na_na_na&fm=organic&iid=5d05607a-6345-4d19-b8c6-c8c4c21c050a.MOBFWQ6B7KKRXDDS.SEARCH&ppt=hp&ppn=homepage&ssid=0sc0d1awkg0000001675935199363&qH=0b3f45b266a97d70",
    },
  },
];
export function create_product(){
  for (let idx = 0; idx < productJSON.length; idx++) {
    let product_JSON_1_ele = productJSON[idx];
    let product_string = JSON.stringify(product_JSON_1_ele);
    let product_parse = JSON.parse(product_string);
  
    //----------------product div--------------------
    let product_div = document.createElement("div");
    product_div.id = `product_div_${idx + 1}`
    let product = document.createElement("div");
    product.classList.add("product");
  
    //Add to cart Functionality.
    // let add_to_cart_div = document.createElement("div");
    // add_to_cart_div.id = `add_to_cart_div${idx + 1}`
    // add_to_cart_div.classList.add("add_to_cart_div")
  
    // //add to compare checkbox.
    // let add_to_cart_checkbox = document.createElement("input");
    // add_to_cart_checkbox.classList.add("add_to_cart_checkbox")
    // add_to_cart_checkbox.type = "checkbox";
    // add_to_cart_checkbox.id = `add_to_cart_product${idx + 1}`
    // add_to_cart_checkbox.name = "add_to_cart"
    // add_to_cart_checkbox.value = "add_to_cart"
    // add_to_cart_checkbox.classList.add("add_to_cart_checkbox")
    // add_to_cart_div.appendChild(add_to_cart_checkbox)
  
    // let checkbox_label_cart = document.createElement("label")
    // checkbox_label_cart.htmlFor = "add_to_cart";
    // checkbox_label_cart.innerHTML = "Add to Cart";
    // add_to_cart_div.appendChild(checkbox_label_cart);
  
    //Add to compare Functionality.
    // let add_to_compare_div = document.createElement("div");
    // add_to_compare_div.id = `add_to_compare_div_${idx + 1}`
    // add_to_compare_div.classList.add("add_to_compare_div")
  
    //add to compare checkbox.
    // let add_to_compare_checkbox = document.createElement("input");
    // add_to_compare_checkbox.classList.add("add_to_compare_checkbox")
    // add_to_compare_checkbox.type = "checkbox";
    // add_to_compare_checkbox.id = `add_to_compare_product_${idx + 1}`
    // add_to_compare_checkbox.name = "add_to_compare"
    // add_to_compare_checkbox.value = "add_to_compare"
    // add_to_compare_checkbox.classList.add("add_to_compare_checkbox")
    // add_to_compare_div.appendChild(add_to_compare_checkbox)
  
    // let checkbox_label = document.createElement("label")
    // checkbox_label.htmlFor = "add_to_compare";
    // checkbox_label.innerHTML = "Add to Compare";
    // add_to_compare_div.appendChild(checkbox_label);
  
    //Appending all the elements of productdiv to productdiv.
    product_div.appendChild(product);
    // product_div.appendChild(add_to_cart_div);
    // product_div.appendChild(add_to_compare_div);
  
    //product details div.
    let img_and_details_div= document.createElement("div");
    img_and_details_div.classList.add("img_and_details_div");
    const product_img = document.createElement("img");
    product_img.src = `${product_parse.image.url}`
    let raw_image = img_and_details_div.appendChild(product_img)
    raw_image.classList.add("product-image");
  
    //appending specifications_ul ul to product details.
    let specifications_ul = document.createElement("ul");
    specifications_ul.classList.add("specifications_ul");
    img_and_details_div.appendChild(specifications_ul);
  
    //appending product_name to product description.
    let product_name = document.createElement("p");
    product_name.classList.add("product-name")
    product_name.innerHTML = `${product_parse.title}`;
    specifications_ul.appendChild(product_name);
  
    //appending ratings and reviews div.
    //ratings div.
  
    let ratings = document.createElement("div");
    ratings.classList.add("ratings");
    specifications_ul.appendChild(ratings);
  
    //rating pill.
    let rating_pill = document.createElement("div");
    rating_pill.classList.add("rating-pill");
    rating_pill.innerHTML = `${product_parse.ratings.overallRating}`
  
    let grade_star=document.createElement("img");
    grade_star.src="./images/grade.png"
    rating_pill.appendChild(grade_star);
    ratings.appendChild(rating_pill);
    
  
    //ratings and reviews count.
    let ratings_and_reviews = document.createElement("p");
    ratings_and_reviews.classList.add("ratings_and_reviews");
    ratings_and_reviews.innerHTML = `${product_parse.ratings.totalRatingsNum} Ratings & ${product_parse.ratings.totalReviewsNum} Reviews`
    ratings.appendChild(ratings_and_reviews)
  
  
    // ul for specifications.
    let specifications = document.createElement("ul");
    specifications.classList.add("specifications");
    specifications_ul.appendChild(specifications);
  
    //features list li.
    for (let i = 0; i < product_parse.featuresList.length; i++) {
      let featuresList = document.createElement("li");
      featuresList.innerHTML = `${product_parse.featuresList[i]}`
      specifications.appendChild(featuresList)
    }
  
    //-----------------------product_pricing-----------
    //product pricing div
    let product_pricing = document.createElement("div");
    product_pricing.classList.add("product_pricing");
  
    //h3 price.
    let price = document.createElement("h3");
    product_pricing.appendChild(price);
    price.innerHTML = `Rs. ${product_parse.price.mrp}`
    price.classList.add("price");
  
    //price_list ul
    let price_list = document.createElement("ul");
    price_list.classList.add("price_list_ul")
    product_pricing.appendChild(price_list);
  
    // li - child of price_list.
    let finalprice = document.createElement("li");
    let finalprice_div = document.createElement("div");
    finalprice.appendChild(finalprice_div)
    finalprice.innerHTML = `Rs. ${product_parse.price.finalPrice}`
    price_list.appendChild(finalprice);
  
    //1. span element.
    let span = document.createElement("span")
    span.classList.add("offer_percentage")
    if (product_parse.price.discount.type === "PERCENT") {
      span.innerHTML = `&nbsp;  ${product_parse.price.discount.data} % off`
    }
    else {
      span.innerHTML = `  ${product_parse.price.discount.data} ${toLowerCase(product_parse.price.discount.type)}`
    }
    finalprice.appendChild(span)
  
    let freeDelivery = document.createElement("li");
    if (product_parse.freeDelivery) {
      freeDelivery.innerHTML = `Free Delivery`
      price_list.appendChild(freeDelivery)
    }
    else {
      delivery = "not eligible"
    }
  
    let ExchangeOffer = document.createElement("li");
    let bold_price=document.createElement("span");
    bold_price.innerHTML=`${product_parse.exchangeOfferDiscount.data}`
    bold_price.classList.add("bold");

    let off_on_exchange=document.createElement("span");
    off_on_exchange.innerHTML=" off on Exchange"
    ExchangeOffer.innerHTML = `Upto Rs. `
    ExchangeOffer.appendChild(bold_price)
    ExchangeOffer.appendChild(off_on_exchange)
    price_list.appendChild(ExchangeOffer)
    
  
    //BankOffers.
    let bank_offers = document.createElement("li");
    let bank_offers_button = document.createElement("a")
    bank_offers_button.classList.add("bank-offers")
    price_list.appendChild(bank_offers);
    bank_offers.appendChild(bank_offers_button)
    bank_offers_button.innerHTML = `${product_parse.bankOffersLink.buttonText}`
    bank_offers_button.addEventListener("click", linkBankOffer)
  
    function linkBankOffer() {
      window.location = "https://nextleap.app/"
    }
    
    let product_hr = document.createElement("hr");
    product_hr.classList.add("product_hr")
  
    product.appendChild(img_and_details_div);
    product.appendChild(product_pricing);
    document.body.appendChild(product_div);
    document.body.appendChild(product_hr);
  }

}

//compare allfunctionality
let compare_all_checkboxes = document.getElementsByName("add_to_compare");
compare_all_checkboxes.forEach(occurence => {
  occurence.addEventListener("change", function (event) {
    if (document.getElementById("compare_dialog_box")) {
      //nothing.
    }
    else {
      let compare_dialog_box = document.createElement("div");
      compare_dialog_box.id = "compare_dialog_box"
      compare_dialog_box.classList.add("add_to_compare_dialog_box");
      navbar.appendChild(compare_dialog_box); //appending the dialogbox to navbar. 
    }
 
    if(event.target.checked){
      let each_product_div = document.createElement("div");
      each_product_div.id = "each_product_div";
      each_product_div.classList.add("each_product_div")
     
      let cross_img = document.createElement("img");
      cross_img.src = "images/close.png"
      cross_img.classList.add("cross_img")
      each_product_div.appendChild(cross_img);
      let the_uncheck=`${event.target.id}`;
      let the_uncheck_id=document.getElementById(the_uncheck)
      cross_img.addEventListener("click", function () {
      each_product_div.classList.add("display_none");
      the_uncheck_id.checked=false;




        // if (document.getElementById("all_products_div").length > 1) {
        //   each_product_div.classList.add("display_none");
        //   the_uncheck_id.checked = false;
        // }
        // else{
        //   the_uncheck_id.checked = false;
        //   let id_compare_dialog_box_for_remove_all=document.getElementById("compare_dialog_box");
        //   id_compare_dialog_box_for_remove_all.classList.add("display_none")
        // }
     
      })
  
      let inner_div_of_comparing_product = document.createElement("img");
      inner_div_of_comparing_product.id = "inner_div_of_comparing_product"
      inner_div_of_comparing_product.src =event.target.parentElement.parentElement.childNodes[0].childNodes[0].childNodes[0].src
      inner_div_of_comparing_product.classList.add("compare_product_img");
      each_product_div.appendChild(inner_div_of_comparing_product)
  
      let product_name_for_each_product = document.createElement("div");
      product_name_for_each_product.innerHTML = event.target.parentElement.parentElement.childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML
      product_name_for_each_product.classList.add("product_name_for_each_product")
      each_product_div.appendChild(product_name_for_each_product);
  
    
  
      if (document.getElementById("all_products_div")) {
        let id_of_all_products_div = document.getElementById("all_products_div");
        id_of_all_products_div.classList.add("id_of_all_products_div")
        id_of_all_products_div.appendChild(each_product_div)
  
      }
      else {
        let all_products_div = document.createElement("div");
        all_products_div.id = "all_products_div"
        all_products_div.appendChild(each_product_div);
  
        let remove_all_button = document.createElement("button");
        remove_all_button.innerHTML = "Remove All";
        remove_all_button.classList.add("remove_all_button")
   
  
  
        let compare_all_button = document.createElement("button");
        compare_all_button.id = "compare_all_button"
        compare_all_button.classList.add("compare_all_button");
  
        let compare_dialog_box_buttons_div = document.createElement("div");
        compare_dialog_box_buttons_div.classList.add("compare_dialog_box_buttons_div")
        compare_dialog_box_buttons_div.appendChild(remove_all_button);
        compare_dialog_box_buttons_div.appendChild(compare_all_button);
        remove_all_button.addEventListener("click", function () {
          let gettig_all_comapre_checkbox_to_uncheck=document.getElementsByName("add_to_compare");
          for(let idx_for_uncheck=0;idx_for_uncheck<document.getElementsByName("add_to_compare").length;idx_for_uncheck++){
            gettig_all_comapre_checkbox_to_uncheck[idx_for_uncheck].checked=false
          }
          let id_of_compare_div = document.getElementById("compare_dialog_box")
          id_of_compare_div.classList.add("display_none");
  
        })
  
        compare_dialog_box.appendChild(all_products_div);
        compare_dialog_box.appendChild(compare_dialog_box_buttons_div)
  
      }
  
      let id_of_all_products_div = document.getElementById("all_products_div")
      let id_of_compare_all_button = document.getElementById("compare_all_button")

      if(all_products_div.childNodes.length<3){
        id_of_compare_all_button.innerHTML=`Compare   `
      }
      else{
        id_of_compare_all_button.innerHTML = `Compare All (${id_of_all_products_div.children.length})`
      }
      
    }
   
  });


})